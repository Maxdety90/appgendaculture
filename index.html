<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Le Savoir √âpique - Vendredi 12 D√©cembre 2025</title>
    <meta
      name="description"
      content="D√©couvrez une question de culture g√©n√©rale, un d√©bat et un fait marquant chaque jour."
    />
    <meta property="og:title" content="Le Savoir √âpique du Jour" />
    <meta property="og:type" content="website" />
    <link rel="canonical" href="[Votre URL ici]" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;700&family=Montserrat:wght@300;600&display=swap"
    />
    <style>
      /* --- Variables de Th√®me (Or/Sombre) --- */
      :root {
        --color-background-light: #f4f4f9;
        --color-text-light: #1e1e1e;
        --color-gold-light: #b8860b; /* DarkGoldenrod */
        --color-card-bg-light: #ffffff;
        --color-border-light: #e0e0e0;
      }

      .dark-mode {
        --color-background-dark: #121212;
        --color-text-dark: #e0e0e0;
        --color-gold-dark: #ffd700; /* Gold */
        --color-card-bg-dark: #1e1e1e;
        --color-border-dark: #333333;

        background-color: var(--color-background-dark);
        color: var(--color-text-dark);
      }

      /* Utilisation des variables pour le th√®me par d√©faut (Clair) */
      body {
        font-family: "Montserrat", sans-serif;
        background-color: var(--color-background-light);
        color: var(--color-text-light);
        transition: background-color 0.3s, color 0.3s;
        margin: 0;
        padding: 0;
        line-height: 1.6;
      }

      /* Bascule vers le th√®me sombre */
      .dark-mode body {
        background-color: var(--color-background-dark);
        color: var(--color-text-dark);
      }

      /* --- Style Global --- */
      .container {
        max-width: 1100px;
        margin: 0 auto;
        padding: 20px;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        border-bottom: 2px solid var(--color-border-light);
        margin-bottom: 30px;
      }
      .dark-mode header {
        border-bottom-color: var(--color-border-dark);
      }

      .logo {
        font-family: "Crimson Pro", serif;
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--color-gold-light);
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        transition: color 0.3s;
      }
      .dark-mode .logo {
        color: var(--color-gold-dark);
        text-shadow: 1px 1px 3px rgba(255, 215, 0, 0.3);
      }

      .header-controls {
        display: flex;
        gap: 15px;
        align-items: center;
      }

      .date-display {
        font-size: 1.2rem;
        font-weight: 600;
        text-align: right;
        color: inherit;
      }

      /* --- Boutons et Ic√¥nes (Or) --- */
      .control-btn,
      .nav-btn,
      #theme-toggle {
        background: none;
        border: 2px solid var(--color-gold-light);
        color: var(--color-gold-light);
        padding: 8px 15px;
        cursor: pointer;
        border-radius: 5px;
        font-weight: 600;
        transition: all 0.2s ease-in-out;
        text-transform: uppercase;
      }
      .dark-mode .control-btn,
      .dark-mode .nav-btn,
      .dark-mode #theme-toggle {
        border-color: var(--color-gold-dark);
        color: var(--color-gold-dark);
      }

      .control-btn:hover,
      .nav-btn:hover,
      #theme-toggle:hover {
        background-color: var(--color-gold-light);
        color: var(--color-background-light);
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .dark-mode .control-btn:hover,
      .dark-mode .nav-btn:hover,
      .dark-mode #theme-toggle:hover {
        background-color: var(--color-gold-dark);
        color: var(--color-background-dark);
        box-shadow: 0 4px 10px rgba(255, 215, 0, 0.3);
      }

      /* Boutons d√©sactiv√©s */
      .nav-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        background: none;
        transform: none;
        box-shadow: none;
      }

      /* --- Cartes de Contenu --- */
      .content-card {
        background-color: var(--color-card-bg-light);
        border: 1px solid var(--color-border-light);
        padding: 30px;
        margin-bottom: 25px;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        animation: fadeIn 0.5s ease-out;
        overflow: hidden; /* Pour les coins arrondis */
      }
      .dark-mode .content-card {
        background-color: var(--color-card-bg-dark);
        border-color: var(--color-border-dark);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .card-title {
        font-size: 1.8rem;
        font-weight: 700;
        margin-top: 0;
        border-left: 4px solid var(--color-gold-light);
        padding-left: 15px;
        color: inherit;
      }
      .dark-mode .card-title {
        border-left-color: var(--color-gold-dark);
      }

      .card-text {
        font-size: 1.1rem;
        margin: 15px 0;
      }

      /* Question de Culture G√©n√©rale */
      #answer-area {
        max-height: 0;
        opacity: 0;
        overflow: hidden;
        transition: max-height 0.5s ease-out, opacity 0.5s ease-out;
      }
      #answer-area.visible {
        max-height: 500px; /* Grande valeur pour permettre l'expansion */
        opacity: 1;
        margin-top: 20px;
        padding-top: 15px;
        border-top: 1px dashed var(--color-border-light);
      }
      .dark-mode #answer-area.visible {
        border-top-color: var(--color-border-dark);
      }
      .explanation {
        font-style: italic;
        margin-top: 10px;
        font-size: 0.95rem;
        color: #777; /* Reste sobre pour l'explication */
      }
      .dark-mode .explanation {
        color: #bbb;
      }

      /* Question Ouverte / D√©bat */
      .open-question {
        background-color: var(--color-border-light);
        padding: 15px;
        border-radius: 8px;
        font-style: italic;
      }
      .dark-mode .open-question {
        background-color: #333;
      }

      /* --- Footer et Navigation --- */
      footer {
        text-align: center;
        padding: 30px 0;
        margin-top: 40px;
        border-top: 2px solid var(--color-border-light);
        font-size: 0.9rem;
      }
      .dark-mode footer {
        border-top-color: var(--color-border-dark);
      }

      .footer-nav {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 15px;
      }
      .copyright {
        color: #888;
      }

      /* --- Message de Contenu Indisponible (Avant le 25/12) --- */
      #content-area {
        min-height: 400px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        gap: 20px;
      }
      .unavailable-message {
        font-size: 1.5rem;
        color: #b8860b;
        padding: 30px;
        border: 2px dashed #b8860b;
        border-radius: 10px;
        animation: pulse 1.5s infinite alternate;
      }
      .dark-mode .unavailable-message {
        color: #ffd700;
        border-color: #ffd700;
      }
      @keyframes pulse {
        from {
          transform: scale(1);
          opacity: 0.8;
        }
        to {
          transform: scale(1.02);
          opacity: 1;
        }
      }

      /* --- Impression (media print) --- */
      @media print {
        body {
          background: none !important;
          color: #000 !important;
        }
        header,
        footer,
        .header-controls,
        .nav-btn,
        #show-answer-btn,
        .open-question {
          display: none !important;
        }
        .container {
          max-width: none;
          margin: 0;
          padding: 0;
        }
        .logo {
          font-size: 1.5rem;
          color: #000;
          text-shadow: none;
          display: block;
          margin-bottom: 10px;
          text-align: left;
        }
        .print-header {
          display: block;
          border-bottom: 1px solid #000;
          padding-bottom: 10px;
          margin-bottom: 20px;
        }
        .content-card {
          box-shadow: none;
          border: 1px solid #ccc;
          margin-bottom: 15px;
          page-break-inside: avoid;
        }
        #answer-area {
          display: block !important;
          max-height: none !important;
          opacity: 1 !important;
        }
        .explanation {
          color: #555;
        }
      }

      /* --- Responsive (Mobile First) --- */
      @media (max-width: 600px) {
        header {
          flex-direction: column;
          align-items: flex-start;
        }
        .header-controls {
          margin-top: 15px;
          width: 100%;
          justify-content: space-between;
        }
        .logo {
          font-size: 2rem;
        }
        .date-display {
          font-size: 1rem;
          text-align: left;
          width: 100%;
          order: 1; /* Move date below logo on small screens */
        }
        .control-btn,
        .nav-btn,
        #theme-toggle {
          padding: 6px 10px;
          font-size: 0.85rem;
        }
        .footer-nav {
          flex-direction: column;
          gap: 10px;
        }
      }
    </style>
    <script src="days.js"></script>
  </head>
  <body>
    <div class="container">
      <header>
        <h1 class="logo">Le Savoir √âpique</h1>
        <div class="header-controls">
          <span
            id="current-date-display"
            class="date-display"
            aria-live="polite"
            >Chargement de la date...</span
          >
          <button
            id="print-btn"
            class="control-btn"
            aria-label="Imprimer la page du jour"
            onclick="window.print()"
          >
            <span aria-hidden="true">üñ®Ô∏è</span> Imprimer
          </button>
          <button
            id="theme-toggle"
            aria-label="Basculer le th√®me (clair/sombre)"
          >
            <span aria-hidden="true">‚òÄÔ∏è/üåô</span>
          </button>
        </div>
      </header>

      <main id="content-area"></main>

      <footer>
        <div class="footer-nav">
          <button id="prev-btn" class="nav-btn" aria-label="Jour Pr√©c√©dent">
            &laquo; Pr√©c√©dent
          </button>
          <input
            type="date"
            id="date-picker"
            class="nav-btn"
            aria-label="S√©lectionner une date"
          />
          <button id="next-btn" class="nav-btn" aria-label="Jour Suivant">
            Suivant &raquo;
          </button>
        </div>
        <p class="copyright">
          ¬© 2025-2026 Le Savoir √âpique. Tous droits r√©serv√©s.
        </p>
      </footer>
    </div>

    <script>
      // --- Configuration ---
      const DATE_FORMAT_OPTIONS = {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
      };
      // Date de d√©but et de fin de la p√©riode couverte par days.js (ISO YYYY-MM-DD)
      const START_DATE_ISO = "2025-12-25";
      const END_DATE_ISO = "2026-12-31";

      // R√©f√©rences DOM
      const contentArea = document.getElementById("content-area");
      const dateDisplay = document.getElementById("current-date-display");
      const prevBtn = document.getElementById("prev-btn");
      const nextBtn = document.getElementById("next-btn");
      const datePicker = document.getElementById("date-picker");
      const themeToggle = document.getElementById("theme-toggle");

      // Initialisation de la date actuelle (par d√©faut : la date du jour de l'utilisateur)
      // La date est g√©r√©e en tant qu'objet Date pour la manipulation
      let currentDate = new Date();

      // --- Logique d'Aide ---

      // Convertit une Date en format ISO (YYYY-MM-DD)
      function dateToISO(date) {
        return date.toISOString().split("T")[0];
      }

      // Convertit une Date en format lisible FR
      function formatDateFR(date) {
        return date.toLocaleDateString("fr-FR", DATE_FORMAT_OPTIONS);
      }

      // Ajoute/retire un jour √† un objet Date
      function addDays(date, days) {
        const newDate = new Date(date);
        newDate.setDate(date.getDate() + days);
        return newDate;
      }

      // --- Logique Principale d'Affichage et de Navigation ---

      function loadContent(date) {
        const isoDate = dateToISO(date);
        const dataEntry = DAYS_DATA.find((d) => d.date === isoDate);

        // Mettre √† jour la date affich√©e
        dateDisplay.textContent = formatDateFR(date);
        // Mettre √† jour le date picker pour la synchronisation
        datePicker.value = isoDate;

        // Mettre √† jour le titre de la page pour le SEO/Social Sharing
        document.title = `Le Savoir √âpique - ${formatDateFR(date)}`;

        // V√©rification de la plage de donn√©es
        const startDate = new Date(START_DATE_ISO);
        const endDate = new Date(END_DATE_ISO);

        // D√©sactiver/Activer les boutons de navigation
        prevBtn.disabled = dateToISO(addDays(date, -1)) < START_DATE_ISO;
        nextBtn.disabled = dateToISO(addDays(date, 1)) > END_DATE_ISO;

        // Logique de contenu : si la date est hors de la plage d√©finie ou si aucune donn√©e n'est trouv√©e
        if (date < startDate || date > endDate || !dataEntry) {
          // Afficher le message d'indisponibilit√©, comme demand√© pour le 12 D√©cembre 2025
          contentArea.innerHTML = `
                    <div class="unavailable-message" aria-live="polite">
                        <h2>Contenu non disponible pour le ${formatDateFR(
                          date
                        )}</h2>
                        <p>Le Savoir √âpique commence le ${formatDateFR(
                          startDate
                        )}. Revenez apr√®s cette date pour d√©couvrir la premi√®re carte !</p>
                    </div>
                `;
          return; // Arr√™ter l'ex√©cution si pas de donn√©es
        }

        // --- Construction du HTML du Jour (Si Donn√©es Disponibles) ---

        contentArea.innerHTML = `
                <section class="content-card" id="general-q-card">
                    <h2 class="card-title">‚ú® Question de Culture G√©n√©rale</h2>
                    <p class="card-text">${dataEntry.general_question.question}</p>
                    <button id="show-answer-btn" class="control-btn" aria-controls="answer-area" aria-expanded="false">
                        Montrer la R√©ponse
                    </button>
                    <div id="answer-area" role="region" aria-hidden="true">
                        <p class="card-text"><strong>R√©ponse :</strong> ${dataEntry.general_question.answer}</p>
                        <p class="explanation">
                            Explication : ${dataEntry.general_question.explanation}
                        </p>
                    </div>
                </section>

                <section class="content-card" id="open-q-card">
                    <h2 class="card-title">üó£Ô∏è Question Ouverte / D√©bat</h2>
                    <p class="card-text">${dataEntry.open_question.question}</p>
                    <div class="open-question">
                        <p><em>(Question ouverte : ${dataEntry.open_question.notes})</em></p>
                    </div>
                </section>

                <section class="content-card" id="fact-card">
                    <h2 class="card-title">üí° Le Saviez-vous ? (Fait Marquant)</h2>
                    <p class="card-text">${dataEntry.did_you_know.text}</p>
                </section>
            `;

        // Ajout du listener pour montrer/cacher la r√©ponse
        document
          .getElementById("show-answer-btn")
          .addEventListener("click", toggleAnswer);
      }

      function toggleAnswer() {
        const answerArea = document.getElementById("answer-area");
        const button = document.getElementById("show-answer-btn");

        const isVisible = answerArea.classList.toggle("visible");

        // Accessibilit√© (ARIA)
        answerArea.setAttribute("aria-hidden", !isVisible);
        button.setAttribute("aria-expanded", isVisible);

        button.textContent = isVisible
          ? "Cacher la R√©ponse"
          : "Montrer la R√©ponse";
      }

      // --- Gestion des √âv√©nements ---

      function handleNavigation(days) {
        // Cr√©er une nouvelle date pour √©viter de modifier l'objet Date actuel
        const newDate = addDays(currentDate, days);

        // Mettre √† jour la date actuelle
        currentDate = newDate;

        // Recharger le contenu
        loadContent(currentDate);
      }

      // Listener pour Pr√©c√©dent
      prevBtn.addEventListener("click", () => handleNavigation(-1));

      // Listener pour Suivant
      nextBtn.addEventListener("click", () => handleNavigation(1));

      // Listener pour le s√©lecteur de date (Calendrier)
      datePicker.addEventListener("change", (event) => {
        const selectedDate = new Date(event.target.value);
        // Ajouter un jour pour corriger le d√©calage UTC/Local Time Zone lors de la s√©lection
        currentDate = addDays(selectedDate, 1);
        loadContent(currentDate);
      });

      // --- Gestion du Th√®me Clair/Sombre ---
      function applyTheme(theme) {
        const isDark = theme === "dark";
        document.body.classList.toggle("dark-mode", isDark);
        themeToggle.innerHTML = isDark
          ? '<span aria-hidden="true">‚òÄÔ∏è</span> Th√®me Clair'
          : '<span aria-hidden="true">üåô</span> Th√®me Sombre';
        localStorage.setItem("theme", theme);
      }

      themeToggle.addEventListener("click", () => {
        const currentTheme = document.body.classList.contains("dark-mode")
          ? "dark"
          : "light";
        const newTheme = currentTheme === "light" ? "dark" : "light";
        applyTheme(newTheme);
      });

      // --- Initialisation ---

      function init() {
        // 1. Appliquer le th√®me (local storage ou pr√©f√©rence syst√®me)
        const savedTheme = localStorage.getItem("theme");
        const prefersDark =
          window.matchMedia &&
          window.matchMedia("(prefers-color-scheme: dark)").matches;
        const initialTheme = savedTheme || (prefersDark ? "dark" : "light");

        // Ajout de la classe sur <html> pour le ciblage des variables
        document.documentElement.classList.toggle(
          "dark-mode",
          initialTheme === "dark"
        );
        applyTheme(initialTheme);

        // 2. D√©finir les limites du date picker
        datePicker.setAttribute("min", START_DATE_ISO);
        datePicker.setAttribute("max", END_DATE_ISO);

        // 3. Charger le contenu pour la date actuelle
        loadContent(currentDate);
      }

      // Lancer l'initialisation apr√®s le chargement du DOM (le script est en bas de body)
      init();
    </script>
  </body>
</html>
